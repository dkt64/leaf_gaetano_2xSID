//=====================================================================================================================
// Leaf - 2xSID by Gaetano
// Code by DKT/Samar
//=====================================================================================================================

#import "inc/makra.asm"

//====================================================================
// Sta≈Çe
//====================================================================

.const	IRQ1_LINE		= $fa
.const 	MUSIC		= $1000

//====================================================================
// Zeropage
//====================================================================

.const	IRQ_ZP		= $02	// zajmuje 4

//=====================================================================================================================
// Basic i start programu
//=====================================================================================================================

	BasicUpstart2(start)

start:	
	sei
	lda #$35
	sta $01

	lda #0
	jsr $1000

	jsr multiply_table_generator

	lda $dc0d
	lda $dd0d
	lda #$7f
	sta $dc0d
	sta $dd0d
	lda #$01
	sta $d01a
	asl $d019
	lda #$1b
	sta $d011
	IrqSetup(IRQ1_LINE, irq1)
	cli
	jmp *

//====================================================================
// irq
//====================================================================

irq1:
	IrqEntry(IRQ_ZP)

	ldx #5
	dex
	bne *-1
	inc $d020
	jsr $1003
	dec $d020

	IrqExit(IRQ_ZP)

//=====================================================================================================================
// Dane
//=====================================================================================================================

	* = MUSIC
	.import binary "data/tune.prg",2

//=====================================================================================================================
// Libs
//=====================================================================================================================

#import "inc/math.asm"
